module.exports=[35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},51234,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"HandleISRError",{enumerable:!0,get:function(){return e}});let d=a.r(56704).workAsyncStorage;function e(a){let{error:b}=a;if(d){let a=d.getStore();if((null==a?void 0:a.isRevalidate)||(null==a?void 0:a.isStaticGeneration))throw console.error(b),b}return null}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},40622,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return g}});let d=a.r(87924),e=a.r(51234),f={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{fontSize:"14px",fontWeight:400,lineHeight:"28px",margin:"0 8px"}},g=function(a){let{error:b}=a,c=null==b?void 0:b.digest;return(0,d.jsxs)("html",{id:"__next_error__",children:[(0,d.jsx)("head",{}),(0,d.jsxs)("body",{children:[(0,d.jsx)(e.HandleISRError,{error:b}),(0,d.jsx)("div",{style:f.error,children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("h2",{style:f.text,children:["Application error: a ",c?"server":"client","-side exception has occurred while loading ",window.location.hostname," (see the"," ",c?"server logs":"browser console"," for more information)."]}),c?(0,d.jsx)("p",{style:f.text,children:"Digest: "+c}):null]})})]})]})};("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},42343,a=>{"use strict";a.s(["GenIcon",()=>i],42343);var b=a.i(72131),c={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},d=b.default.createContext&&b.default.createContext(c),e=["attr","size","title"];function f(){return(f=Object.assign.bind()).apply(this,arguments)}function g(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function h(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?g(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):g(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function i(a){return c=>b.default.createElement(j,f({attr:h({},a.attr)},c),function a(c){return c&&c.map((c,d)=>b.default.createElement(c.tag,h({key:d},c.attr),a(c.child)))}(a.child))}function j(a){var g=c=>{var d,{attr:g,size:i,title:j}=a,k=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){if(b.indexOf(d)>=0)continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,e),l=i||c.size||"1em";return c.className&&(d=c.className),a.className&&(d=(d?d+" ":"")+a.className),b.default.createElement("svg",f({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},c.attr,g,k,{className:d,style:h(h({color:a.color||c.color},c.style),a.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),j&&b.default.createElement("title",null,j),a.children)};return void 0!==d?b.default.createElement(d.Consumer,null,a=>g(a)):g(c)}},4526,a=>{"use strict";a.s(["default",()=>m],4526);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(75003),f=a.i(22677),g=a.i(18459);function h({savedMood:a,onConfirm:c,onCancel:d}){return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex justify-center items-center z-50",children:(0,b.jsxs)("div",{className:"bg-white w-[330px] rounded-xl p-6 shadow-xl relative",children:[(0,b.jsx)("h2",{className:"text-center text-lg font-semibold mb-4",children:"Delete Mood"}),(0,b.jsx)("div",{className:"flex items-center gap-3 mb-6 p-3 rounded-lg",style:{backgroundColor:`${a.moodColor}20`,border:`1px solid ${a.moodColor}40`},children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-gray-800",children:a.moodName}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["ðŸŽµ ",a.music.title]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["ðŸŒ¸ ",a.scent.name]})]})}),(0,b.jsx)("p",{className:"text-center text-gray-600 mb-6 text-sm",children:"Are you sure you want to delete this mood? This action cannot be undone."}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:d,className:"flex-1 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Cancel"}),(0,b.jsx)("button",{onClick:c,className:"flex-1 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-medium",children:"Delete"})]})]})})}function i({savedMood:a,onConfirm:c,onCancel:d}){return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex justify-center items-center z-50",children:(0,b.jsxs)("div",{className:"bg-white w-[330px] rounded-xl p-6 shadow-xl relative",children:[(0,b.jsx)("h2",{className:"text-center text-lg font-semibold mb-4",children:"Replace Current Segment"}),(0,b.jsx)("div",{className:"flex items-center gap-3 mb-6 p-3 rounded-lg",style:{backgroundColor:`${a.moodColor}20`,border:`1px solid ${a.moodColor}40`},children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-gray-800",children:a.moodName}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["ðŸŽµ ",a.music.title]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["ðŸŒ¸ ",a.scent.name]})]})}),(0,b.jsx)("p",{className:"text-center text-gray-600 mb-6 text-sm",children:"Replace the current mood segment with this saved mood? This will immediately switch to the selected mood."}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:d,className:"flex-1 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Cancel"}),(0,b.jsx)("button",{onClick:c,className:"flex-1 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-medium",children:"Replace"})]})]})})}var j=a.i(68114),k=a.i(33496),l=a.i(43517);function m(){let a=(0,d.useRouter)(),{data:m}=(0,e.useSession)(),n=m?.user?.email===l.ADMIN_EMAIL,[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)(1),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{try{if(n){(0,k.initializeSampleMoods)();let a=(0,k.getSavedMoods)();a.sort((a,b)=>b.savedAt-a.savedAt),p(a)}else{let a=await fetch("/api/moods/saved",{credentials:"include"});if(a.ok){let b=await a.json();p(b.savedMoods||[])}}}catch(a){console.error("Error fetching saved moods:",a)}finally{r(!1)}})()},[n]);let y=Math.ceil(o.length/8),z=(s-1)*8,A=o.slice(z,z+8),B=async a=>{try{n?((0,k.deleteSavedMood)(a),p(b=>b.filter(b=>b.id!==a))):(await fetch(`/api/moods/saved/${a}`,{method:"DELETE",credentials:"include"})).ok&&p(b=>b.filter(b=>b.id!==a));let b=o.filter(b=>b.id!==a),c=Math.ceil(b.length/8);s>c&&c>0&&t(c)}catch(a){console.error("Error deleting saved mood:",a)}},C=async()=>{if(w)try{(await fetch(`/api/moods/saved/${w.id}/apply`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({replaceCurrentSegment:!0})})).ok&&a.push("/home")}catch(a){console.error("Error applying saved mood:",a)}finally{x(null)}};return q?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-gray-500",children:"ë¡œë”© ì¤‘..."})}):(0,b.jsxs)("div",{className:"flex flex-col h-screen overflow-hidden relative",children:[(0,b.jsx)(f.default,{}),(0,b.jsx)("div",{className:"flex-1 overflow-hidden pb-20 px-4 pt-4",children:(0,b.jsxs)("div",{className:"max-w-[375px] mx-auto h-full flex flex-col",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"ë‚´ ë¬´ë“œì…‹"}),0===o.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center flex-1 text-center",children:[(0,b.jsx)("div",{className:"text-6xl mb-4",children:"â­"}),(0,b.jsx)("p",{className:"text-gray-600 mb-2",children:"ì €ìž¥ëœ ë¬´ë“œê°€ ì—†ìŠµë‹ˆë‹¤"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"ë¬´ë“œ ëŒ€ì‹œë³´ë“œì—ì„œ ë³„ ë²„íŠ¼ì„ ëˆŒëŸ¬ ë¬´ë“œë¥¼ ì €ìž¥í•´ë³´ì„¸ìš”"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,b.jsx)("div",{className:"grid grid-cols-2 gap-3 grid-rows-4 auto-rows-fr mb-4",children:A.map(a=>{let c=(0,j.blendWithWhite)(a.moodColor,.85);return(0,b.jsxs)("div",{className:"relative rounded-xl p-3 cursor-pointer transition-transform hover:scale-105 shadow-sm min-h-[140px] flex flex-col",style:{backgroundColor:c,border:`1px solid ${a.moodColor}60`},onClick:()=>{x(a)},children:[(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),v(a)},className:"absolute top-2 right-2 w-6 h-6 rounded-full bg-white/80 backdrop-blur flex items-center justify-center text-gray-600 hover:text-red-500 transition text-xs z-10",title:"ì‚­ì œ",children:"Ã—"}),(0,b.jsxs)("div",{className:"mt-2 flex-1 flex flex-col justify-between",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-800 mb-1 line-clamp-2",children:a.moodName}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("p",{className:"text-xs text-gray-600 truncate",children:["ðŸŽµ ",a.music.title]}),(0,b.jsxs)("p",{className:"text-xs text-gray-600 truncate",children:["ðŸŒ¸ ",a.scent.name]}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(a.savedAt).toLocaleDateString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]},a.id)})})}),y>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between mt-4 pb-4",children:[(0,b.jsx)("button",{onClick:()=>t(a=>Math.max(1,a-1)),disabled:1===s,className:`px-4 py-2 rounded-lg font-medium transition ${1===s?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"ì´ì „"}),(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:[s," / ",y]}),(0,b.jsx)("button",{onClick:()=>t(a=>Math.min(y,a+1)),disabled:s===y,className:`px-4 py-2 rounded-lg font-medium transition ${s===y?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"ë‹¤ìŒ"})]})]})]})}),(0,b.jsx)(g.default,{}),u&&(0,b.jsx)(h,{savedMood:u,onConfirm:()=>{B(u.id),v(null)},onCancel:()=>v(null)}),w&&(0,b.jsx)(i,{savedMood:w,onConfirm:C,onCancel:()=>x(null)})]})}}];

//# sourceMappingURL=_5c5e4a93._.js.map