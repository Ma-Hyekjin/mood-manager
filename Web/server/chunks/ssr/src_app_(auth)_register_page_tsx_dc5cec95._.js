module.exports=[8520,a=>{"use strict";a.s(["default",()=>s],8520);var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(46842);function f({familyName:a,name:c,familyNameDisabled:d=!1,nameDisabled:f=!1,onFamilyNameChange:g,onNameChange:h,onErrorClear:i,onEnterKey:j}){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Family Name"}),(0,b.jsxs)("div",{className:`flex items-center px-3 py-2 border rounded-md ${d?"bg-gray-100":""}`,children:[(0,b.jsx)(e.User,{size:18,className:"text-gray-400 mr-2"}),(0,b.jsx)("input",{type:"text",placeholder:"Family name",className:`w-full outline-none ${d?"bg-gray-100 cursor-not-allowed":""}`,value:a,disabled:d,onChange:a=>{g(a.target.value),i()},onKeyDown:a=>{"Enter"===a.key&&j()}})]})]}),(0,b.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Name"}),(0,b.jsxs)("div",{className:`flex items-center px-3 py-2 border rounded-md ${f?"bg-gray-100":""}`,children:[(0,b.jsx)(e.User,{size:18,className:"text-gray-400 mr-2"}),(0,b.jsx)("input",{type:"text",placeholder:"Name",className:`w-full outline-none ${f?"bg-gray-100 cursor-not-allowed":""}`,value:c,disabled:f,onChange:a=>{h(a.target.value),i()},onKeyDown:a=>{"Enter"===a.key&&j()}})]})]})]})}function g({birthDate:a,birthDateError:c,gender:d,birthDateDisabled:e=!1,genderDisabled:f=!1,onBirthDateChange:g,onGenderChange:h,onErrorClear:i,onEnterKey:j,formatBirthDate:k,validateBirthDate:l}){return(0,b.jsx)("div",{className:"flex flex-col space-y-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col flex-1 space-y-2",children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Date of Birth"}),(0,b.jsx)("div",{className:`flex items-center px-3 py-2 border rounded-md ${c?"border-red-500":""} ${e?"bg-gray-100":""}`,children:(0,b.jsx)("input",{type:"text",placeholder:"yyyy.mm.dd",className:`w-full outline-none ${e?"bg-gray-100 cursor-not-allowed":""}`,value:a,disabled:e,onChange:a=>{g(k(a.target.value)),i()},onBlur:()=>{a&&l(a)},onKeyDown:a=>{"Enter"===a.key&&j()},maxLength:10})}),c&&(0,b.jsx)("p",{className:"text-red-500 text-xs",children:c})]}),(0,b.jsxs)("div",{className:"flex flex-col flex-1 space-y-2",children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Gender"}),(0,b.jsxs)("div",{className:"flex border rounded-md overflow-hidden",children:[(0,b.jsx)("button",{type:"button",disabled:f,onClick:()=>{h("male"),i()},className:`flex-1 px-4 py-2 text-sm border-r border-gray-300 transition ${"male"===d?"bg-black text-white":f?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Male"}),(0,b.jsx)("button",{type:"button",disabled:f,onClick:()=>{h("female"),i()},className:`flex-1 px-4 py-2 text-sm transition ${"female"===d?"bg-black text-white":f?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Female"})]})]})]})})}var h=a.i(92258);function i({email:a,emailError:c,emailDisabled:d=!1,onEmailChange:e,onErrorClear:f,onEnterKey:g,validateEmail:i}){return(0,b.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Email"}),(0,b.jsxs)("div",{className:`flex items-center px-3 py-2 border rounded-md ${c?"border-red-500":""} ${d?"bg-gray-100":""}`,children:[(0,b.jsx)(h.Mail,{size:18,className:"text-gray-400 mr-2"}),(0,b.jsx)("input",{type:"email",placeholder:"name@example.com",className:`w-full outline-none ${d?"bg-gray-100 cursor-not-allowed":""}`,value:a,disabled:d,onChange:a=>{e(a.target.value),f()},onBlur:()=>{},onKeyDown:a=>{"Enter"===a.key&&g()}})]}),c&&(0,b.jsx)("p",{className:"text-red-500 text-xs",children:c})]})}var j=a.i(43108),k=a.i(77156),l=a.i(41379);function m({password:a,passwordStrength:c,passwordsMatch:d,showPassword:e,onPasswordChange:f,onShowPasswordToggle:g,onErrorClear:h,onEnterKey:i,calculatePasswordStrength:m,confirmPassword:n}){return(0,b.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Password"}),(0,b.jsxs)("div",{className:`flex items-center px-3 py-2 border rounded-md relative transition-all ${!0===d?"border-green-500 shadow-[0_0_0_3px_rgba(34,197,94,0.1)]":""}`,children:[(0,b.jsx)(j.Lock,{size:18,className:`mr-2 ${!0===d?"text-green-500":"text-gray-400"}`}),(0,b.jsx)("input",{type:e?"text":"password",placeholder:"password",className:"w-full outline-none",value:a,onChange:a=>{f(a.target.value),h()},onKeyDown:a=>{"Enter"===a.key&&i()}}),(0,b.jsx)("button",{type:"button",className:"absolute right-3",onClick:g,children:e?(0,b.jsx)(l.EyeOff,{size:18,className:"text-gray-500"}):(0,b.jsx)(k.Eye,{size:18,className:"text-gray-500"})})]}),a&&(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"flex-1 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:`h-full transition-all ${"weak"===c?"bg-red-500 w-1/3":"medium"===c?"bg-yellow-500 w-2/3":"strong"===c?"bg-green-500 w-full":""}`})}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"weak"===c?"Weak":"medium"===c?"Medium":"strong"===c?"Strong":""})]}),(0,b.jsxs)("div",{className:"text-xs text-gray-500 space-y-0.5",children:[(0,b.jsx)("p",{children:"Password requirements:"}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-0.5 ml-2",children:[(0,b.jsx)("li",{className:a.length>=6?"text-green-600":"",children:"At least 6 characters"}),(0,b.jsx)("li",{className:a.length>=8?"text-green-600":"",children:"At least 8 characters (recommended)"}),(0,b.jsx)("li",{className:/[A-Z]/.test(a)?"text-green-600":"",children:"Include uppercase letter"}),(0,b.jsx)("li",{className:/[0-9]/.test(a)?"text-green-600":"",children:"Include number"}),(0,b.jsx)("li",{className:/[^a-zA-Z0-9]/.test(a)?"text-green-600":"",children:"Include special character"})]})]})]})]})}function n({confirmPassword:a,password:c,passwordsMatch:d,showConfirmPassword:e,onConfirmPasswordChange:f,onShowConfirmPasswordToggle:g,onErrorClear:h,onEnterKey:i}){return(0,b.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Confirm Password"}),(0,b.jsxs)("div",{className:`flex items-center px-3 py-2 border rounded-md relative transition-all ${a&&!1===d?"border-red-500 shadow-[0_0_0_3px_rgba(239,68,68,0.1)]":!0===d?"border-green-500 shadow-[0_0_0_3px_rgba(34,197,94,0.1)]":""}`,children:[(0,b.jsx)(j.Lock,{size:18,className:`mr-2 ${a&&!1===d?"text-red-500":!0===d?"text-green-500":"text-gray-400"}`}),(0,b.jsx)("input",{type:e?"text":"password",placeholder:"confirm password",className:"w-full outline-none",value:a,onChange:a=>{f(a.target.value),h()},onKeyDown:a=>{"Enter"===a.key&&i()}}),(0,b.jsx)("button",{type:"button",className:"absolute right-3",onClick:g,children:e?(0,b.jsx)(l.EyeOff,{size:18,className:"text-gray-500"}):(0,b.jsx)(k.Eye,{size:18,className:"text-gray-500"})})]}),a&&!1===d&&(0,b.jsx)("p",{className:"text-red-500 text-xs",children:"Passwords do not match."})]})}function o({form:a}){let{familyName:c,name:e,birthDate:h,birthDateError:j,gender:k,email:l,password:o,confirmPassword:p,showPassword:q,showConfirmPassword:r,errorMsg:s,emailError:t,passwordStrength:u,passwordsMatch:v,isSocialSignup:w,isEmailDisabled:x,isNameDisabled:y,isFamilyNameDisabled:z,isBirthDateDisabled:A,isGenderDisabled:B,setFamilyName:C,setName:D,setBirthDate:E,setBirthDateError:F,setGender:G,setEmail:H,setPassword:I,setConfirmPassword:J,setShowPassword:K,setShowConfirmPassword:L,setErrorMsg:M,setEmailError:N,setPasswordStrength:O,setPasswordsMatch:P,validateEmail:Q,calculatePasswordStrength:R,formatBirthDate:S,validateBirthDate:T,isFormValid:U,handleRegister:V}=a;return(0,b.jsxs)("div",{className:"w-full max-w-sm space-y-5",children:[(0,b.jsx)(f,{familyName:c,name:e,familyNameDisabled:z,nameDisabled:y,onFamilyNameChange:a=>{C(a),M("")},onNameChange:a=>{D(a),M("")},onErrorClear:()=>M(""),onEnterKey:V}),(0,b.jsx)(g,{birthDate:h,birthDateError:j,gender:k,birthDateDisabled:A,genderDisabled:B,onBirthDateChange:a=>{let b=S(a);E(b),M(""),F(""),b&&F(T(b))},onGenderChange:a=>{G(a),M("")},onErrorClear:()=>M(""),onEnterKey:V,formatBirthDate:S,validateBirthDate:T}),(0,b.jsx)(i,{email:l,emailError:t,emailDisabled:x,onEmailChange:a=>{H(a),M(""),N(""),a&&!Q(a)&&N("Please enter a valid email address.")},onErrorClear:()=>M(""),onEnterKey:V,validateEmail:Q}),!w&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m,{password:o,passwordStrength:u??"",passwordsMatch:v,showPassword:q,onPasswordChange:a=>{I(a),M(""),O(R(a)),p&&P(a===p)},onShowPasswordToggle:()=>K(!q),onErrorClear:()=>M(""),onEnterKey:()=>{U()&&V()},calculatePasswordStrength:a=>R(a)??"",confirmPassword:p}),(0,b.jsx)(n,{confirmPassword:p,password:o,passwordsMatch:v,showConfirmPassword:r,onConfirmPasswordChange:a=>{J(a),M(""),a?P(o===a):P(null)},onShowConfirmPasswordToggle:()=>L(!r),onErrorClear:()=>M(""),onEnterKey:()=>{U()&&V()}})]}),s&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:s}),(0,b.jsx)("button",{onClick:V,disabled:!U(),className:`w-full py-2 rounded-lg font-medium transition ${U()?"bg-black text-white active:bg-gray-700 cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Sign Up"}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Already have an account? "}),(0,b.jsx)(d.default,{href:"/login",className:"text-sm text-black underline hover:text-gray-700 transition",children:"Sign In"})]})]})}var p=a.i(50944),q=a.i(6704);function r(){let d=function(){let b=(0,p.useRouter)(),d=(0,p.useSearchParams)(),e=d?.get("provider")||"",f=d?.get("email")||"",g=d?.get("name")||"",h=d?.get("familyName")||"",i=d?.get("birthDate")||"",j=d?.get("gender")||"",k=d?.get("image")||"",l=!!e,[m,n]=(0,c.useState)(""),[o,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(null);(0,c.useEffect)(()=>{if(l){if(z(f),g&&r(g),h&&n(h),i){let a=new Date(i),b=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");t(`${b}.${c}.${d}`)}j&&x(j)}},[l,f,g,h,i,j]);let Q=a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),R=a=>{if(!a)return"";let b=a.split(".");if(3!==b.length)return"Please enter date in yyyy.mm.dd format";let c=parseInt(b[0],10),d=parseInt(b[1],10),e=parseInt(b[2],10);if(isNaN(c)||c<1913||c>2013)return"Year must be between 1913 and 2013";if(isNaN(d)||d<1||d>12)return"Month must be between 1 and 12";if(isNaN(e)||e<1)return"Day is invalid";let f=new Date(c,d,0).getDate();return e>f?`Day must be between 1 and ${f} for this month`:""},S=async()=>{if(J(""),L(""),!m||!o||!s||!w||!y){let a="Please fill in all required fields.";J(a),q.default.error(a);return}if(!l&&(!A||!C)){let a="Please enter your password.";J(a),q.default.error(a);return}let c=R(s);if(c){v(c),q.default.error(c);return}if(!Q(y)){let a="Please enter a valid email address.";L(a),q.default.error(a);return}if(!l){if(A!==C){let a="Passwords do not match.";J(a),q.default.error(a);return}if(A.length<6){let a="Password must be at least 6 characters.";J(a),q.default.error(a);return}if("weak"===M){let a="Password is too weak. Please use a stronger password.";J(a),q.default.error(a);return}}try{let c={familyName:m,name:o,birthDate:(()=>{if(!s)return"";let a=s.split(".");if(3!==a.length)return"";let b=a[0],c=a[1].padStart(2,"0"),d=a[2].padStart(2,"0");return`${b}-${c}-${d}`})(),gender:w,email:y};l?(c.provider=e,c.profileImageUrl=k||null):c.password=A;let d=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(c)});if(!d.ok){let a=(await d.json()).message||"Registration failed.";J(a),q.default.error(a);return}let f=await d.json();if(!f.success){let a=f.message||"Registration failed.";J(a),q.default.error(a);return}let{signIn:g}=await a.A(46856);if(l){q.default.success("Registration successful! Logging you in...");let a=await g(e,{redirect:!1});if(a?.error){q.default.error("Registration successful, but login failed. Please try logging in."),b.push("/login");return}}else{let a=await g("credentials",{email:y,password:A,redirect:!1});if(a?.error){q.default.error("Registration successful, but login failed. Please try logging in."),b.push("/login");return}}q.default.success("Welcome to Mood Manager!"),b.push("/home")}catch(b){console.error(b);let a="An unexpected error occurred. Please try again.";J(a),q.default.error(a)}};return{familyName:m,name:o,birthDate:s,birthDateError:u,gender:w,email:y,password:A,confirmPassword:C,showPassword:E,showConfirmPassword:G,errorMsg:I,emailError:K,passwordStrength:M,passwordsMatch:O,isSocialSignup:l,provider:e,isEmailDisabled:l&&!!f,isNameDisabled:l&&!!g,isFamilyNameDisabled:l&&!!h,isBirthDateDisabled:l&&!!i,isGenderDisabled:l&&!!j,setFamilyName:n,setName:r,setBirthDate:t,setBirthDateError:v,setGender:x,setEmail:z,setPassword:B,setConfirmPassword:D,setShowPassword:F,setShowConfirmPassword:H,setErrorMsg:J,setEmailError:L,setPasswordStrength:N,setPasswordsMatch:P,validateEmail:Q,calculatePasswordStrength:a=>{if(0===a.length)return null;if(a.length<6)return"weak";let b=0;return(a.length>=8&&b++,/[a-z]/.test(a)&&b++,/[A-Z]/.test(a)&&b++,/[0-9]/.test(a)&&b++,/[^a-zA-Z0-9]/.test(a)&&b++,b<=2)?"weak":b<=3?"medium":"strong"},formatBirthDate:a=>{let b=a.replace(/[^0-9]/g,"").slice(0,8);return b.length<=4?b:b.length<=6?`${b.slice(0,4)}.${b.slice(4)}`:`${b.slice(0,4)}.${b.slice(4,6)}.${b.slice(6)}`},validateBirthDate:R,isFormValid:()=>l?""!==m.trim()&&""!==o.trim()&&""!==s.trim()&&""===R(s)&&""!==w&&""!==y.trim():""!==m.trim()&&""!==o.trim()&&""!==s.trim()&&""===R(s)&&""!==w&&""!==y.trim()&&Q(y)&&A.length>=6&&"weak"!==M&&A===C&&C.length>0,handleRegister:S}}();return(0,b.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center px-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold mb-8",children:"Mood Manager"}),(0,b.jsx)(o,{form:d})]})}function s(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center px-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold mb-8",children:"Mood Manager"}),(0,b.jsx)("div",{className:"text-gray-500",children:"Loading..."})]}),children:(0,b.jsx)(r,{})})}}];

//# sourceMappingURL=src_app_%28auth%29_register_page_tsx_dc5cec95._.js.map