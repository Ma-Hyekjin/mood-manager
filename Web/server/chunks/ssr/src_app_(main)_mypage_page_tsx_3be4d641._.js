module.exports=[32501,a=>{"use strict";a.s(["default",()=>z],32501);var b=a.i(87924),c=a.i(72131),d=a.i(75003),e=a.i(50944),f=a.i(6704),g=a.i(22677),h=a.i(18459),i=a.i(15720),j=a.i(92258),k=a.i(70106);let l=(0,k.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var m=a.i(46842);let n=(0,k.default)("circle-user",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),o=(0,k.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),p=(0,k.default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);function q({profile:a,isEditingProfile:d,editedName:e,editedFamilyName:f,editedBirthDate:g,editedGender:h,editedPhone:k,profileImage:q,isUpdating:r,onEditClick:s,onSave:t,onCancel:u,onImageChange:v,onNameChange:w,onFamilyNameChange:x,onBirthDateChange:y,onGenderChange:z,onPhoneChange:A}){let[B,C]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{let a=setTimeout(()=>{C(!1)},500);return()=>clearTimeout(a)},[]),B&&!a)?(0,b.jsx)("div",{className:"bg-white border-b border-gray-200 px-4 py-6",children:(0,b.jsx)(i.ProfileSkeleton,{})}):(0,b.jsxs)("div",{className:"bg-white border-b border-gray-200 px-4 py-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Profile"}),d?(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:t,disabled:r,className:"px-3 py-1 text-sm bg-black text-white rounded-md hover:bg-gray-800 transition disabled:opacity-50",children:r?"Saving...":"Save"}),(0,b.jsx)("button",{onClick:u,disabled:r,className:"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition disabled:opacity-50",children:"Cancel"})]}):(0,b.jsxs)("button",{onClick:s,className:"flex items-center gap-1 text-sm text-gray-600 hover:text-gray-800 transition",children:[(0,b.jsx)(o,{size:16}),"Edit"]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,b.jsx)("div",{className:"relative",children:d?(0,b.jsxs)("label",{className:"cursor-pointer",children:[(0,b.jsxs)("div",{className:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden relative group",children:[q?(0,b.jsx)("img",{src:q,alt:"Profile",className:"w-full h-full object-cover"}):(0,b.jsx)(n,{size:32,className:"text-gray-400"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition flex items-center justify-center",children:(0,b.jsx)(p,{size:20,className:"text-white opacity-0 group-hover:opacity-100 transition"})})]}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:v,className:"hidden"})]}):(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:q?(0,b.jsx)("img",{src:q,alt:"Profile",className:"w-full h-full object-cover"}):(0,b.jsx)(n,{size:32,className:"text-gray-400"})})}),(0,b.jsx)("div",{className:"flex-1",children:d?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("input",{type:"text",value:f,onChange:a=>x(a.target.value),placeholder:"Family Name",className:"w-full px-2 py-1 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-black"}),(0,b.jsx)("input",{type:"text",value:e,onChange:a=>w(a.target.value),placeholder:"Name",className:"w-full px-2 py-1 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-black"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold",children:[a?.familyName," ",a?.name]}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a?.email})]})})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center text-sm",children:[(0,b.jsx)(j.Mail,{size:16,className:"text-gray-400 mr-3"}),(0,b.jsx)("span",{className:"text-gray-600",children:a?.email})]}),(0,b.jsxs)("div",{className:"flex items-center text-sm",children:[(0,b.jsx)(l,{size:16,className:"text-gray-400 mr-3 flex-shrink-0"}),d?(0,b.jsx)("input",{type:"date",value:g,onChange:a=>y(a.target.value),className:"flex-1 px-2 py-1 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-black"}):(0,b.jsx)("span",{className:"text-gray-600",children:a?.birthDate?new Date(a.birthDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"-"})]}),(0,b.jsxs)("div",{className:"flex items-center text-sm",children:[(0,b.jsx)(m.User,{size:16,className:"text-gray-400 mr-3 flex-shrink-0"}),d?(0,b.jsxs)("div",{className:"flex gap-2 flex-1",children:[(0,b.jsx)("button",{type:"button",onClick:()=>z("male"),className:`flex-1 px-3 py-1 text-sm border rounded-md transition ${"male"===h?"bg-black text-white border-black":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Male"}),(0,b.jsx)("button",{type:"button",onClick:()=>z("female"),className:`flex-1 px-3 py-1 text-sm border rounded-md transition ${"female"===h?"bg-black text-white border-black":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Female"})]}):(0,b.jsx)("span",{className:"text-gray-600",children:a?.gender||"-"})]}),(0,b.jsxs)("div",{className:"flex items-center text-sm",children:[(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-400 mr-3 flex-shrink-0",children:(0,b.jsx)("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),d?(0,b.jsx)("input",{type:"tel",value:k,onChange:a=>A(a.target.value),placeholder:a?.phone?"":"Add phone number",className:"flex-1 px-2 py-1 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-black"}):(0,b.jsx)("span",{className:"text-gray-600",children:a?.phone||"-"})]})]})]})}var r=a.i(38246);let s=(0,k.default)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),t=(0,k.default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),u=(0,k.default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),v=(0,k.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),w=(0,k.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);function x({onLogout:a,onDeleteAccount:c}){return(0,b.jsxs)("div",{className:"bg-white mt-4",children:[(0,b.jsxs)(r.default,{href:"/mypage/qna",className:"flex items-center justify-between px-4 py-4 border-b border-gray-200 hover:bg-gray-50 transition",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(s,{size:20,className:"text-gray-400 mr-3"}),(0,b.jsx)("span",{className:"text-gray-700",children:"Q&A"})]}),(0,b.jsx)("span",{className:"text-gray-400",children:"›"})]}),(0,b.jsxs)(r.default,{href:"/mypage/inquiry",className:"flex items-center justify-between px-4 py-4 border-b border-gray-200 hover:bg-gray-50 transition",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(t,{size:20,className:"text-gray-400 mr-3"}),(0,b.jsx)("span",{className:"text-gray-700",children:"1:1 Inquiry"})]}),(0,b.jsx)("span",{className:"text-gray-400",children:"›"})]}),(0,b.jsxs)(r.default,{href:"/mypage/privacy",className:"flex items-center justify-between px-4 py-4 border-b border-gray-200 hover:bg-gray-50 transition",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(u,{size:20,className:"text-gray-400 mr-3"}),(0,b.jsx)("span",{className:"text-gray-700",children:"Privacy Policy"})]}),(0,b.jsx)("span",{className:"text-gray-400",children:"›"})]}),(0,b.jsxs)("button",{onClick:a,className:"w-full flex items-center px-4 py-4 border-b border-gray-200 hover:bg-gray-50 transition text-left",children:[(0,b.jsx)(v,{size:20,className:"text-gray-400 mr-3"}),(0,b.jsx)("span",{className:"text-gray-700",children:"Logout"})]}),(0,b.jsxs)("button",{onClick:c,className:"w-full flex items-center px-4 py-4 hover:bg-red-50 transition text-left",children:[(0,b.jsx)(w,{size:20,className:"text-red-400 mr-3"}),(0,b.jsx)("span",{className:"text-red-600",children:"Delete Account"})]})]})}function y({show:a,confirmText:c,isDeleting:d,onConfirmTextChange:e,onConfirm:f,onCancel:g}){return a?(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 px-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Delete Account"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["This action cannot be undone. All your data will be permanently deleted. If you understand and want to proceed, please type ",(0,b.jsx)("strong",{children:'"I understand"'})," below."]}),(0,b.jsx)("input",{type:"text",value:c,onChange:a=>e(a.target.value),placeholder:"I understand",className:"w-full px-3 py-2 border rounded-md mb-4"}),(0,b.jsxs)("div",{className:"flex space-x-3",children:[(0,b.jsx)("button",{onClick:g,className:"flex-1 px-4 py-2 border rounded-md hover:bg-gray-50 transition",children:"Cancel"}),(0,b.jsx)("button",{onClick:f,disabled:"I understand"!==c||d,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Deleting...":"Delete"})]})]})}):null}function z(){let{status:a}=(0,d.useSession)(),i=(0,e.useRouter)(),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(!1),{profile:p,isEditingProfile:r,editedName:s,editedFamilyName:t,editedBirthDate:u,editedGender:v,editedPhone:w,profileImage:z,isUpdating:A,setIsEditingProfile:B,setEditedName:C,setEditedFamilyName:D,setEditedBirthDate:E,setEditedGender:F,setEditedPhone:G,handleImageChange:H,handleProfileUpdate:I,handleProfileCancel:J}=function(){let{data:a}=(0,d.useSession)(),[b,e]=(0,c.useState)(null),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!1),y=(0,c.useCallback)(async()=>{try{let a=await fetch("/api/auth/profile");if(!a.ok)throw Error("Failed to fetch profile");let b=await a.json();e(b.profile),t(b.profile.profileImageUrl||null)}catch(a){console.error("Error fetching profile:",a),f.default.error("Failed to load profile data.")}},[]);(0,c.useEffect)(()=>{a&&y()},[a,y]),(0,c.useEffect)(()=>{b&&(j(b.name),l(b.familyName),n(b.birthDate||""),p("Male"===b.gender?"male":"Female"===b.gender?"female":""),r(b.phone||""))},[b]);let z=async()=>{if(!i.trim()||!k.trim())return void f.default.error("Name and Family Name are required.");x(!0);try{let a=new FormData;a.append("name",i.trim()),a.append("familyName",k.trim()),m&&a.append("birthDate",m),o&&a.append("gender",o),void 0!==q&&a.append("phone",q.trim()),u&&a.append("profileImage",u);let b=await fetch("/api/auth/profile",{method:"PUT",body:a});if(!b.ok){let a=await b.json();throw Error(a.message||"Failed to update profile")}let c=await b.json();e(c.profile),t(c.profile.profileImageUrl||null),v(null),f.default.success("Profile updated successfully."),h(!1)}catch(a){console.error("Error updating profile:",a),f.default.error(a instanceof Error?a.message:"Failed to update profile. Please try again.")}finally{x(!1)}};return{profile:b,isEditingProfile:g,editedName:i,editedFamilyName:k,editedBirthDate:m,editedGender:o,editedPhone:q,profileImage:s,isUpdating:w,setIsEditingProfile:h,setEditedName:j,setEditedFamilyName:l,setEditedBirthDate:n,setEditedGender:p,setEditedPhone:r,handleImageChange:a=>{let b=a.target.files?.[0];if(b){if(!b.type.startsWith("image/"))return void f.default.error("Please select an image file.");if(b.size>5242880)return void f.default.error("Image size must be less than 5MB.");let a=new FileReader;a.onloadend=()=>{t(a.result)},a.readAsDataURL(b),v(b)}},handleProfileUpdate:z,handleProfileCancel:()=>{b&&(j(b.name),l(b.familyName),n(b.birthDate||""),p("Male"===b.gender?"male":"Female"===b.gender?"female":""),r(b.phone||""),t(b.profileImageUrl||null)),v(null),h(!1)}}}(),K=async()=>{await (0,d.signOut)({redirect:!1}),i.push("/login")},L=async()=>{if("I understand"===l){o(!0);try{let a=await fetch("/api/auth/account",{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({confirmText:l})}),b=await a.json();if(!a.ok)throw Error(b.message||"Failed to delete account");f.default.success("Account deleted successfully"),await (0,d.signOut)({redirect:!1}),i.push("/login")}catch(a){console.error("Error deleting account:",a),f.default.error(a instanceof Error?a.message:"Failed to delete account. Please try again.")}finally{o(!1),k(!1),m("")}}};return((0,c.useEffect)(()=>{"unauthenticated"===a&&i.push("/login")},[a,i]),"loading"===a)?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-gray-500",children:"Loading..."})}):"unauthenticated"===a?null:(0,b.jsxs)("div",{className:"flex flex-col h-screen overflow-hidden relative bg-white",children:[(0,b.jsx)(g.default,{}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto pb-20",children:(0,b.jsxs)("div",{className:"max-w-[375px] mx-auto",children:[(0,b.jsx)("div",{className:"bg-white border-b border-gray-200 px-4 py-4",children:(0,b.jsx)("h1",{className:"text-xl font-semibold",children:"My Page"})}),(0,b.jsx)(q,{profile:p,isEditingProfile:r,editedName:s,editedFamilyName:t,editedBirthDate:u,editedGender:v,editedPhone:w,profileImage:z,isUpdating:A,onEditClick:()=>B(!0),onSave:I,onCancel:J,onImageChange:H,onNameChange:C,onFamilyNameChange:D,onBirthDateChange:E,onGenderChange:F,onPhoneChange:G}),(0,b.jsx)(x,{onLogout:K,onDeleteAccount:()=>k(!0)})]})}),(0,b.jsx)(h.default,{}),(0,b.jsx)(y,{show:j,confirmText:l,isDeleting:n,onConfirmTextChange:m,onConfirm:L,onCancel:()=>{k(!1),m("")}})]})}}];

//# sourceMappingURL=src_app_%28main%29_mypage_page_tsx_3be4d641._.js.map