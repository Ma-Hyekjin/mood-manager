# 페이지별 역할

**작성일**: 2025년

---

## 로그인 페이지 (`/login`)

### 역할
- 이메일/비밀번호 또는 소셜 로그인으로 인증
- NextAuth를 통한 세션 생성
- 로그인 성공 시 설문 조사 완료 여부 확인 후 `/home` 또는 `/survey`로 이동

### 구현 상태
- ✅ 목업 모드: `test@example.com` / `1234`로 로그인 가능
- ✅ 소셜 로그인: Google, Kakao, Naver 지원
- ✅ Rate Limiting: 5회 실패 시 15분 잠금
- ✅ 비밀번호 찾기 링크 제공
- ⚠️ 설문 조사 확인: 목업으로 항상 `/home`으로 이동

---

## 회원가입 페이지 (`/register`)

### 역할
- 새 계정 생성
- 회원가입 성공 시 NextAuth 세션 생성 후 `/home`으로 이동

### 구현 상태
- ✅ 클라이언트 사이드 검증: 이메일 형식, 비밀번호 강도, 정책 안내
- ✅ 목업 모드: `/api/auth/register` 호출 → 목업 응답 → 세션 생성
- ✅ 백엔드 연동 준비: 주석 처리된 API 호출 코드 포함

---

## 비밀번호 찾기 페이지 (`/forgot-password`)

### 역할
- 이메일 입력 → 인증코드 확인 → 비밀번호 재설정
- 이메일 존재 여부와 관계없이 동일한 응답 반환 (보안)

### 구현 상태
- ✅ 단계별 UI (이메일 입력 → 코드 확인 → 비밀번호 재설정)
- ✅ 이메일 형식 검증
- ✅ 목업 모드: `123456` 코드로 성공 처리
- ✅ API 라우트: `/api/auth/forgot-password`, `/api/auth/verify-reset-code`, `/api/auth/reset-password`

---

## 홈 페이지 (`/home`)

### 역할
- 무드 대시보드: 현재 무드 표시 및 제어
- 디바이스 관리: 디바이스 목록 조회, 추가, 삭제, 제어
- 무드 변경: 색상, 음악, 향 변경

### 구현 상태
- ✅ 무드 대시보드: 목업 무드 데이터로 표시
- ✅ 디바이스 그리드: 목업 디바이스 데이터로 표시
- ✅ 디바이스 추가/삭제/전원 제어/이름 변경
- ✅ 무드 변경: 색상, 음악, 향 변경
- ⚠️ 무드 생성 로직: 미구현 (OpenAI 코드만 작성됨, 실제 사용 안 됨)

### 무드 생성 파이프라인 (목표)
```
WearOS → Firebase → ML 서버 → 백엔드 → OpenAI → 무드 이름 결정
```

**현재 상태:**
- ✅ WearOS 앱에서 Firestore로 데이터 전송 중 (`apps/watch/`)
- ⚠️ Firebase 데이터 읽기: Next.js에서 미구현 (백엔드 담당자 역할)
- ⚠️ 백엔드 무드 생성 로직: 미구현
- ⚠️ OpenAI 코드: `src/lib/openai.ts` 파일만 존재 (실제 사용 안 됨, 패키지 미설치)
- ✅ 무드 표시: MOODS 배열에서 선택하여 표시

---

## 마이페이지 (`/mypage`)

### 역할
- 프로필 정보 표시
- Q&A, 1:1 문의, 개인정보처리방침 링크
- 회원탈퇴

### 구현 상태
- ✅ 프로필 정보: 목업 데이터 표시
- ✅ Q&A 페이지: 자주 묻는 질문 목록 (아코디언 형식)
- ✅ 1:1 문의 페이지: 문의 작성 및 제출 폼
- ✅ 개인정보처리방침 페이지: 개인정보처리방침 내용
- ✅ 회원탈퇴: 경고 모달 및 "I understand" 확인 입력
- ✅ API 라우트: 
  - `GET /api/auth/profile` (프로필 조회)
  - `DELETE /api/auth/account` (회원탈퇴)
  - `POST /api/inquiry` (1:1 문의)

### 하위 페이지
- `/mypage/qna`: Q&A 페이지
- `/mypage/inquiry`: 1:1 문의 페이지
- `/mypage/privacy`: 개인정보처리방침 페이지

---

## API 연동 상태

### 목업 모드
- 모든 API Route가 목업 응답 반환
- 실제 백엔드 호출 코드는 주석 처리됨
- 백엔드 연동 시 주석 해제만 하면 됨

### 백엔드 연동 준비
- 환경 변수 설정 준비 (`BACKEND_URL`)
- 세션 정보 전달 준비 (쿠키)
- 에러 처리 로직 포함
- 유효성 검사 로직 포함
