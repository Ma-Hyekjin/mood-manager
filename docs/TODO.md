# TODO 리스트

**작성일**: 2025년 11월
**상태**: 백엔드 DB 연동 완료 ✅

---

## ✅ 완료된 작업

### 프론트엔드
- ✅ 모든 페이지 구현 완료 (로그인, 회원가입, 비밀번호 찾기, 홈, 마이페이지)
- ✅ 컴포넌트 분리 완료 (모든 페이지 300라인 이하)
- ✅ Toast Notification, Error Boundary 적용
- ✅ 로딩 스켈레톤 UI 추가
- ✅ 반응형 디자인 (모바일 우선, 375px 기준)

### 백엔드 (Next.js API Routes + Prisma)
- ✅ **Phase 1**: 기반 설정 완료
  - Prisma Client 설정
  - 비밀번호 유틸리티 (`bcrypt`)
  - 세션 검증 헬퍼
  - 입력 검증 유틸리티
  - 시드 데이터 (Fragrance 30개, Light 15개, Sound 15개)

- ✅ **Phase 2**: 인증 API 완료 (9개)
  - 회원가입 (일반 + 소셜 로그인 통합)
  - 소셜 로그인 계정 연동 (이메일/전화번호 기반)
  - 프로필 조회/수정
  - 회원탈퇴 (Hard Delete)
  - 1:1 문의
  - 비밀번호 찾기/재설정

- ✅ **Phase 3**: 디바이스 API 완료 (6개)
  - 디바이스 목록 조회/생성/삭제
  - 전원 토글
  - 이름 변경
  - 센트 분사 주기 변경

- ✅ **Phase 4**: 무드 API 완료 (5개)
  - 현재 무드 조회
  - 무드 전체 변경
  - 센트/노래/조명 컬러 개별 변경

### 데이터베이스
- ✅ Prisma + MySQL 설정
- ✅ UUID 기반 ID 시스템 (String 타입)
- ✅ 관계형 데이터 모델 (User-Device-Preset)
- ✅ NextAuth DB 연동
- ✅ Hard Delete 방식 회원탈퇴

### 인증 시스템
- ✅ NextAuth 기반 세션 관리
- ✅ 소셜 로그인 (Google, Kakao, Naver)
- ✅ 이메일/전화번호 기반 계정 통합
- ✅ provider 정보 자동 업데이트

---

## 🎯 현재 해야 할 일

### 1. 테스트 및 검증 ⏳
**우선순위: 높음**

- [ ] 통합 테스트 스크립트 작성
  - 회원가입 → 로그인 → 디바이스 추가 → 무드 설정
  - 5개 이상의 사용 시나리오
- [ ] 실제 API 호출 테스트
  - 개발 서버 실행 후 수동 테스트
  - 모든 엔드포인트 검증
- [ ] 에러 케이스 테스트
  - 잘못된 입력값
  - 인증 실패
  - 권한 없음

### 2. DB 스키마 개선 🔧
**우선순위: 중간**

- [ ] Sound 테이블에 `duration` 필드 추가
  - 현재는 하드코딩된 180초 사용
  - 실제 곡 길이 저장 필요
- [ ] Fragrance 테이블에 `color` 필드 추가
  - 현재는 Light의 color 재사용
  - 향마다 고유 색상 필요
- [ ] Device 테이블 인덱스 최적화
  - `userId`에 인덱스 추가 (조회 성능 향상)
  - `currentPresetId`에 인덱스 추가

### 3. 문서화 📝
**우선순위: 낮음**

- [ ] API 사용 예제 추가
- [ ] 에러 코드 전체 목록 정리
- [ ] 배포 가이드 작성

---

## 📋 선택적 개선 사항

### 성능 최적화
- [ ] 캐싱 전략 (React Query/SWR)
- [ ] DB 쿼리 최적화 (N+1 문제 해결)
- [ ] 이미지 최적화

### 기능 확장
- [ ] 실시간 업데이트 (WebSocket/SSE)
- [ ] 디바이스 상태 실시간 동기화
- [ ] 무드 히스토리 기록

### 보안 강화
- [ ] Rate Limiting
- [ ] CSRF 토큰 검증
- [ ] SQL Injection 방어 (Prisma가 기본 제공)

---

## 🐛 알려진 이슈

### 해결 필요
- ⚠️ Prisma Studio UUID 오류 (캐시 정리로 해결 가능)
- ⚠️ package-lock.json 플랫폼 관련 업데이트 (무시 가능)

### 모니터링 필요
- ⚠️ 소셜 로그인 리다이렉트 플로우 (프로덕션 환경 테스트 필요)
- ⚠️ 비밀번호 재설정 이메일 발송 (현재 콘솔 출력만)

---

## 📊 구현 완성도

| 카테고리 | 완성도 | 비고 |
|---------|--------|------|
| 프론트엔드 | 100% | 모든 페이지 완성 |
| 백엔드 API | 100% | 21개 전체 구현 |
| 데이터베이스 | 95% | 일부 필드 추가 필요 |
| 인증 시스템 | 100% | NextAuth 완전 연동 |
| 테스트 | 30% | 통합 테스트 필요 |
| 문서화 | 90% | API 명세 완료 |

**전체 완성도: 약 85%**

---

## 🚀 다음 단계

1. **즉시**: 통합 테스트 스크립트 작성 및 실행
2. **단기**: DB 스키마 개선 및 마이그레이션
3. **중기**: 성능 최적화 및 에러 핸들링 강화
4. **장기**: 실시간 기능 추가 및 프로덕션 배포

---

## 📝 참고 문서

- `docs/API_SPEC.md` - API 명세서 (21개 엔드포인트)
- `docs/API_ROUTES.md` - API Routes 구조
- `docs/PROJECT_STRUCTURE.md` - 프로젝트 구조 상세
- `docs/SETUP_GUIDE.md` - 설치 및 실행 가이드
- `CLAUDE.md` - 개발 가이드 및 Phase별 작업 내역

---

## 📌 Git 커밋 히스토리 (최근)

```
00bff3e feat: 무드 API DB 연동 구현 (16-20번 API)
57aac9f fix: 소셜 로그인 계정 연동 로직 개선
b864f14 feat: UUID 기반 ID 시스템으로 전환 및 Hard Delete 구현
dd9490a feat: 디바이스 API 구현 및 프론트엔드 DB 연동 (Phase 3)
3e753b2 feat: Phase 2 완료 - 인증 API 전체 구현 및 NextAuth DB 연동
052c3c0 feat: Phase 1 - 백엔드 API 기반 설정 구현
```

---

**최종 업데이트**: 2025년 11월 27일
**작성자**: Claude Code (AI Assistant)
